---
title: 小说精品屋学习笔记
abbrlink: e48fb72f
date: 2024-06-17 15:10:12
tags:
---

## 技术栈

- 后端技术：MYSQL Redis Undertow Nginx
- 前端技术：Vue axios element-plus

## 数据库设计

## 项目开发

### 通用请求/响应数据格式的封装

#### 错误码使用枚举类

* 错误码为字符串类型，共 5 位，分成两个部分：错误产生来源+四位数字编号。
* 错误产生来源分为 A/B/C， A 表示错误来源于用户，比如参数错误，用户安装版本过低，用户支付
* 超时等问题； B 表示错误来源于当前系统，往往是业务逻辑出错，或程序健壮性差等问题； C 表示错误来源于第三方服务，比如 CDN 服务出错，消息投递超时等问题；四位数字编号从 0001 到 9999，大类之间的步长间距预留 100。
* 错误码分为一级宏观错误码、二级宏观错误码、三级宏观错误码。
* 在无法更加具体确定的错误场景中，可以直接使用一级宏观错误码。

#### 跨域配置 

跨域是指浏览器从一个域名的网页去请求另一个域名的资源时，域名、端口、协议任一不同，都是跨域。在前后端分离的模式下，前后端的域名是不一致的，此时就会发生跨域访问问题。

跨域是出于浏览器的同源策略限制，同源策略（Sameoriginpolicy）是一种约定，它是浏览器最核心也最基本的安全功能，如果缺少了同源策略，则浏览器的正常功能可能都会受到影响。

我们可以通过前端配置、后端配置或 nginx 配置来解决跨域问题。

如果选择前端配置，我们可以使用 node 中间件 proxy 配置跨域，前端通过 node proxy 来转发我们的接口请求，和浏览器直接打交道的是 node proxy，这样可以避免浏览器的同源策略。

因为我们项目的侧重点在后端，而且 Spring MVC 提供了跨域解决方案（CORS (opens new window)）的支持。所以我们这里通过后端配置来解决跨域问题。




